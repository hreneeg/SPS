{"changed":true,"filter":false,"title":"show_calendar.php","tooltip":"/show_calendar.php","value":"<!DOCTYPE html>\n<html>\n<?php\n  session_start();\n\t$dateErr=$descERR=\"\";\n\t\n\t\n\t\nif(isset($_SESSION[\"username\"]) && isset($_SESSION[\"password\"])){\n     \n     $user = $_SESSION[\"username\"];\n    $pass = $_SESSION[\"password\"];\n    \n   \n}\n\t\t\t//------------------------------------\n\t\t\t// Insert Event in the Database\n\t\t\t//-----------------------------------\n           include (\"connect.php\");\n           \n           if(isset($_POST[\"addE\"])){\n           \t\n           \t$date = $_POST[\"date\"];\n           \t$desc = $_POST[\"details\"];\n           \t$val = true;\n           \t\n           \tif(empty($_POST[\"date\"])){\n           \t\n           \t$dateErr = \"Please Enter a Date\";\n           \t$val = false;\n           \t}\n           \t\n           \tif(empty($_POST[\"details\"])){\n           \t\n           \t$dateErr = \"Please Enter Detials about the Event\";\n           \t$val = false;\n           \t}\n           \t\n           \tif($val)\n           \t{\n           \t\t\n           \t\t\n           \t//----------------------------------------------------\n           \t// This part just gets the student id\n           \t//----------------------------------------------------\n           \t\t\n           \t $getstudentid = mysqli_query($c9db,\"Select * from student where\n           \t username = '$user' and password = '$pass' \");\n                 \n                            if(mysqli_num_rows($getstudentid) > 0){\n                              while($row = mysqli_fetch_assoc($getstudentid)){\n                                 $sid = $row[\"ID\"];\n                                \n                              }\n                            }\t\n           \t\t\n           \t\t\n           \t//--------------------------------------\t\n           \t// Makes a unqiue Id for each event.  \n           \t//----------------------------------------\n           \t\n           \t $eid = mysqli_query($db,\"SELECT max(id) FROM events\"); \n           \t // Gets the Max or biggest id in the events table\n                                     \n                      if(mysqli_num_rows($eid) > 0)\n                           {\n                             while($row = mysqli_fetch_assoc($eid)){\n                                 $eid =  $row[\"max(id)\"];\n                                   }\n                           }\n                                       \n                       // If there is no id in the events table yet, it will return NULL\n                       // so make the first id 1.\n                       // Else if the is an id, it will add 1 to the max, or the biggest one.\n                                       if($eid == NULL)\n                                       {\n                                           $eid = 1;\n                                       }\n                                       else\n                                       {\n                                           $eid++; \n                                       }\n           \t\n           }\n           \n           //------------------------------------\n           // Insert into tablename (each column name in the database, excatly as there are)\n           // then the values.\n           //----------------------------------\n           \n           $addevent = mysqli_query($db, \"INSERT INTO events (id,description,evdate,sid)\n           VALUES ($eid, '$desc','$date',$sid)\");\n           \n           \n           \n         \n           \n           \n           \n           }\n\n\n?>\n\n\n\n\n<head>\n<link href=\"calCss.css\" rel=\"stylesheet\" type=\"text/css\" media=\"all\"/>\t\n<script language=\"JavaScript\" type=\"text/javascript\">\nfunction initialCalendar(){\n\tvar hr = new XMLHttpRequest();\n\tvar url = \"calendar_start.php\";\n\tvar currentTime = new Date();\n\tvar month = currentTime.getMonth() + 1;\n\tvar year = currentTime.getFullYear();\n\tshowmonth = month;\n\tshowyear = year;\n\tvar vars = \"showmonth=\"+showmonth+\"&showyear=\"+showyear;\n\thr.open(\"POST\", url, true);\n\thr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\thr.onreadystatechange = function() {\n\t\tif(hr.readyState == 4 && hr.status == 200) {\n\t\t\tvar return_data = hr.responseText;\n\t\t\t document.getElementById(\"showCalendar\").innerHTML = return_data;\n\t\t}\n\t}\n\thr.send(vars);\n\tdocument.getElementById(\"showCalendar\").innerHTML = \"processing...\";\n}\n</script>\n\n<script language=\"JavaScript\" type=\"text/javascript\">\nfunction next_month(){\n\tvar nextmonth = showmonth + 1;\n\tif(nextmonth > 12) {\n\t\tnextmonth = 1;\n\t\tshowyear = showyear + 1;\n\t}\n\tshowmonth = nextmonth;\n\t\n\tvar hr = new XMLHttpRequest();\n\tvar url = \"calendar_start.php\";\n\tvar vars = \"showmonth=\"+showmonth+\"&showyear=\"+showyear;\n\thr.open(\"POST\", url, true);\n\thr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\thr.onreadystatechange = function() {\n\t\tif(hr.readyState == 4 && hr.status == 200) {\n\t\t\tvar return_data = hr.responseText;\n\t\t\t document.getElementById(\"showCalendar\").innerHTML = return_data;\n\t\t}\n\t}\n\thr.send(vars);\n\tdocument.getElementById(\"showCalendar\").innerHTML = \"processing...\";\n}\n</script>\n\n<script language=\"JavaScript\" type=\"text/javascript\">\nfunction last_month(){\n\tvar lastmonth = showmonth - 1;\n\tif(lastmonth < 1) {\n\t\tlastmonth = 12;\n\t\tshowyear = showyear - 1;\n\t}\n\tshowmonth = lastmonth;\n\t\n\tvar hr = new XMLHttpRequest();\n\tvar url = \"calendar_start.php\";\n\tvar vars = \"showmonth=\"+showmonth+\"&showyear=\"+showyear;\n\thr.open(\"POST\", url, true);\n\thr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\thr.onreadystatechange = function() {\n\t\tif(hr.readyState == 4 && hr.status == 200) {\n\t\t\tvar return_data = hr.responseText;\n\t\t\t document.getElementById(\"showCalendar\").innerHTML = return_data;\n\t\t}\n\t}\n\thr.send(vars);\n\tdocument.getElementById(\"showCalendar\").innerHTML = \"processing...\";\n}\n</script>\n\n<script type=\"text/javascript\">\nfunction overlay() {\n    el = document.getElementById(\"overlay\");\n\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n\tel = document.getElementById(\"events\");\n\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n\tel = document.getElementById(\"eventsBody\");\n\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n}\n</script>\n\n<script language=\"JavaScript\" type=\"text/javascript\">\nfunction show_details(theId) {\n\tvar deets = (theId.id);\n\tel = document.getElementById(\"overlay\");\n\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n\tel = document.getElementById(\"events\");\n\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n\tvar hr = new XMLHttpRequest();\n\tvar url = \"events.php\";\n\tvar vars = \"deets=\"+deets;\n\thr.open(\"POST\", url, true);\n\thr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\thr.onreadystatechange = function() {\n\t\tif(hr.readyState == 4 && hr.status == 200) {\n\t\t\tvar return_data = hr.responseText;\n\t\t\t document.getElementById(\"events\").innerHTML = return_data;\n\t\t}\n\t}\n\thr.send(vars);\n\tdocument.getElementById(\"events\").innerHTML = \"processing...\";\n}\n</script>\n\n</head>\n\t<button id = \"add\" onclick = \"addEvent('Event', 'add')\"> Add Event </button>\n\t\t<form id = \"Event\" method = \"post\" action = \"show_calendar.php\" style = \"display: none\">\n\t\t\t<fieldset>\n\t\t\t\t<legend>Add an Event</legend>\n\t\t\t\t<p><label class=\"field\" for=\"date\">Date:</label><input type=\"date\" name=\"date\" class=\"textbox-size\"/></p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><label class=\"field\" for=\"details\">Details:</label><input type=\"text\" name=\"details\" class=\"textbox-size\"/></p>\n\t\t\t</p>\n\t\t<p><left><input type=\"submit\" name=\"addE\" style=\"height:22px; width:153px\" value=\"Add\" ></center></p>\n\t\t\t</fieldset>\n\t\t</form>\n<script>\n\tfunction addEvent(id, id2){\n\t\tvar p = document.getElementById(id);\n\t     if( p.style.display == 'none') \n\t\t {\n\t\t\tdocument.getElementById(id).style.display = 'block';\n\t\t\tdocument.getElementById(id2).innerHTML = \"Hide Form\";\n\t\t}else{\n\t\tdocument.getElementById(id).style.display = 'none';\n\t\tdocument.getElementById(id2).innerHTML = \"Add Event\";\n\t\t}\n\t}\n</script>\n<script>\n\tfunction editEvent(){\n\t\t\n\t}\n\t\n</script>\n<script>\n\tfunction deleteEvent(){\n\t\tvar del = (theId.id);\n\t\tel = document.getElementById(\"overlay\");\n\t\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n\t\tel = document.getElementById(\"events\");\n\t\tel.style.display = (el.style.display == \"block\") ? \"none\" : \"block\";\n\t\tvar hr = new XMLHttpRequest();\n\t\tvar url = \"events.php\";\n\t\tvar vars = \"del=\"+del;\n\t\thr.open(\"POST\", url, true);\n\t\thr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\t\thr.onreadystatechange = function() {\n\t\t\tif(hr.readyState == 4 && hr.status == 200) {\n\t\t\t\tvar return_data = hr.responseText;\n\t\t\t\tdocument.getElementById(\"events\").innerHTML = return_data;\n\t\t\t}\n\t\t}\n\t\thr.send(vars);\n\t\tdocument.getElementById(\"events\").innerHTML = \"processing...\";\n}\n\n</script>\n<body onLoad=\"initialCalendar();\">\n\t\n\t<p><center><font size=2><a href=\"userAccountHome.php\">Home</a> &nbsp;&nbsp;&nbsp; \n                            <a href=\"show_calendar.php\">Calendar</a> &nbsp;&nbsp;&nbsp;  \n                            <a href=\"userAccountCourses.php\">Courses</a> &nbsp;&nbsp;&nbsp;  \n                            <a href=\"userAccountContacts.php\">Contacts</a> &nbsp;&nbsp;&nbsp; \n                            <a href=\"userAccountOptions.php\">Options</a> &nbsp;&nbsp;&nbsp;\n                            <a href=\"userAccountLogout.php\">Logout</a>\n    </font></center></p>\n    \n        <table width=\"300\" border=\"0\" align=\"center\" cellpadding=\"0\" cellspacing=\"1\">\n        <tr>\n        <td colspan=\"3\"><strong><center>Calendar</center></strong></td>\n        </tr>\n        </table>\n\t\n<div id=\"showCalendar\"></div>\n<div id=\"overlay\">\n<div id =\"events\" ></div>\n</div>\n\n \n\n\n\n</body>\n</html>","undoManager":{"mark":-1,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":273,"column":37},"end":{"row":273,"column":46},"action":"remove","lines":["Cal_test/"]}]}]]},"ace":{"folds":[],"scrolltop":3623,"scrollleft":0,"selection":{"start":{"row":273,"column":37},"end":{"row":273,"column":37},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":257,"state":"js-start","mode":"ace/mode/php"}},"timestamp":1427309237943}